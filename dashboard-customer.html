<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Dashboard Customer</title>
</head>
<body>

    <header>
        <h1>Sistem Penyewaan Lapangan Futsal</h1>
        <hr>
        <nav>
            <a href="dashboard-customer.html">Booking</a> |
            <a href="index.html">Logout</a>
        </nav>
        <hr>
    </header>

    <h2>Dashboard Customer - Booking</h2>

    <h3>Form Booking</h3>
    <form id="bookingForm">
        <label>Pilih Lapangan:</label><br>
        <select id="lapangan">
            <option>Lapangan A</option>
            <option>Lapangan B</option>
        </select><br><br>

        <label>Tanggal:</label><br>
        <input type="date" id="tanggal" required><br><br>

        <label>Jam Mulai:</label><br>
        <input type="time" id="jamMulai" required><br><br>

        <label>Jam Selesai:</label><br>
        <input type="time" id="jamSelesai" required><br><br>

        <button type="submit">Simpan</button>
        <button type="reset">Reset</button>
    </form>

    <hr>

    <h3>Riwayat Booking</h3>
    <table border="1" cellpadding="10">
        <thead>
            <tr>
                <th>ID</th>
                <th>Lapangan</th>
                <th>Tanggal</th>
                <th>Jam</th>
                <th>Status</th>
                <th>Aksi</th>
            </tr>
        </thead>
        <tbody id="tableBody"></tbody>
    </table>

<script>
let dataBooking = JSON.parse(localStorage.getItem("booking")) || [];
let editIndex = null;

function saveToStorage() {
    localStorage.setItem("booking", JSON.stringify(dataBooking));
}

function renderTable() {
    const tableBody = document.getElementById("tableBody");
    tableBody.innerHTML = "";

    dataBooking.forEach((booking, index) => {
        tableBody.innerHTML += `
            <tr>
                <td>${index + 1}</td>
                <td>${booking.lapangan}</td>
                <td>${booking.tanggal}</td>
                <td>${booking.jamMulai} - ${booking.jamSelesai}</td>
                <td>${booking.status}</td>
                <td>
                    <button onclick="editBooking(${index})">Edit</button>
                    <button onclick="hapusBooking(${index})">Hapus</button>
                </td>
            </tr>
        `;
    });
}

document.getElementById("bookingForm").addEventListener("submit", function(e){
    e.preventDefault();

    const lapangan = document.getElementById("lapangan").value;
    const tanggal = document.getElementById("tanggal").value;
    const jamMulai = document.getElementById("jamMulai").value;
    const jamSelesai = document.getElementById("jamSelesai").value;

    const bookingBaru = {
        lapangan,
        tanggal,
        jamMulai,
        jamSelesai,
        status: "Pending"
    };

    if (editIndex === null) {
        dataBooking.push(bookingBaru);   // CREATE
    } else {
        dataBooking[editIndex] = bookingBaru; // UPDATE
        editIndex = null;
    }

    saveToStorage();
    renderTable();
    this.reset();
});

function editBooking(index){
    const booking = dataBooking[index];

    document.getElementById("lapangan").value = booking.lapangan;
    document.getElementById("tanggal").value = booking.tanggal;
    document.getElementById("jamMulai").value = booking.jamMulai;
    document.getElementById("jamSelesai").value = booking.jamSelesai;

    editIndex = index;
}

function hapusBooking(index){
    dataBooking.splice(index, 1); // DELETE
    saveToStorage();
    renderTable();
}

renderTable(); // READ saat pertama kali load
</script>

</body>
</html>